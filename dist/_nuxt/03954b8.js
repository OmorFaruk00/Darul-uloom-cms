(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{374:function(t,e,r){var content=r(395);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(45).default)("77a68bcc",content,!0,{sourceMap:!1})},394:function(t,e,r){"use strict";r(374)},395:function(t,e,r){var n=r(44)(!1);n.push([t.i,"",""]),t.exports=n},442:function(t,e,r){"use strict";r.r(e);var n=r(0),o=(r(1),r(50),r(53),r(369),r(260),{layout:"Adm-content",data:function(){var t;return t={form_number:"",student_name:"",department:"",department_list:"",batch:"",roll:"",reg_code:""},Object(n.a)(t,"department",""),Object(n.a)(t,"batch_list",""),Object(n.a)(t,"receipt_no",""),Object(n.a)(t,"error",""),Object(n.a)(t,"department_name",null),Object(n.a)(t,"form_info",""),Object(n.a)(t,"show",!1),t},mounted:function(){this.getDepartment()},methods:{searchForm:function(){var t=this;this.$axios.$get("/admission/form-search/"+this.form_number).then((function(e){t.form_info="",t.show=!0})).catch((function(e){302==e.response.status&&(t.$toaster.error("Form not Available"),t.form_info=e.response.data.form_info),console.log(e),t.error=e.response.data.errors}))},getDepartment:function(){var t=this;this.$axios.$get("/admission/department").then((function(e){t.department_list=e})).catch((function(e){t.errors=e.response.message.errors}))},getBatch:function(){var t=this;this.$axios.$get("/admission/batch/"+this.department).then((function(e){console.log(e),t.batch_list=e.data})).catch((function(e){t.error=e.response.data.errors}))},form_sales:function(){var t=this,form={student_name:this.student_name,department:this.department,batch:this.batch};this.$axios.$post("/admission/form-sales/"+this.form_number,form).then((function(e){t.$toaster.success(e.message),t.student_name="",t.department="",t.batch="",t.receipt_no=e.receipt_no})).catch((function(e){t.error=e.response.data.errors}))},print_recieve:function(){var t=this;this.$axios.$get("/admission/print-receive/"+this.form_number,{responseType:"blob"}).then((function(t){var e=window.URL.createObjectURL(new Blob([t])),link=document.createElement("a");link.href=e,link.setAttribute("download","admission_slip.pdf"),document.body.appendChild(link),link.click()})).catch((function(e){t.error=e.response.data.errors}))}}}),c=(r(394),r(30)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-bg pt-5"},[r("div",{staticClass:"container"},[r("div",{staticClass:"form-shadow offset-md-2 col-md-8 p-5"},[r("div",{},[t.show?t._e():r("div",[r("div",{staticClass:"form-group"},[r("label",[t._v("Form Number")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form_number,expression:"form_number"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.form_number},on:{input:function(e){e.target.composing||(t.form_number=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"d-flex justify-content-end pt-3"},[r("button",{staticClass:"btn-submit",on:{click:function(e){return t.searchForm()}}},[t._v("Search")])])]),t._v(" "),t.show?r("div",[r("div",{staticClass:"form-group focused"},[r("label",{attrs:{for:""}},[t._v("Name of Student")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.student_name,expression:"student_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"",id:"",name:"std_name",required:""},domProps:{value:t.student_name},on:{input:function(e){e.target.composing||(t.student_name=e.target.value)}}}),t._v(" "),t.error.student_name?r("h6",{staticClass:"text-danger",domProps:{textContent:t._s(t.error.student_name[0])}}):t._e(),t._v(" "),r("small",{staticClass:"form-text text-danger",attrs:{id:""}},[t._v("Â ")])]),t._v(" "),r("div",{staticClass:"form-group focused"},[r("label",{attrs:{for:"_id"}},[t._v("Department")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.department,expression:"department"}],staticClass:"form-control",attrs:{required:""},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.department=e.target.multiple?r:r[0]},t.getBatch]}},[r("option",{attrs:{selected:"",value:""}},[t._v("Select depertment")]),t._v(" "),t._l(t.department_list,(function(e){return r("option",{key:e.id,domProps:{value:e.id,textContent:t._s(e.department_name)}})}))],2),t._v(" "),t.error.department?r("h6",{staticClass:"text-danger",domProps:{textContent:t._s(t.error.department[0])}}):t._e()]),t._v(" "),r("div",{staticClass:"form-group focused"},[r("label",{attrs:{for:""}},[t._v("Batch")]),t._v(" "),t.batch_list?r("select",{directives:[{name:"model",rawName:"v-model",value:t.batch,expression:"batch"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.batch=e.target.multiple?r:r[0]}}},[r("option",{attrs:{selected:"",value:""}},[t._v("Select Batch")]),t._v(" "),t._l(t.batch_list,(function(e){return r("option",{key:e.id,domProps:{value:e.id,textContent:t._s(e.batch_name)}})}))],2):r("input",{staticClass:"form-control",attrs:{type:"text",disabled:"",placeholder:"Select Department first"}}),t._v(" "),t.error.batch?r("h6",{staticClass:"text-danger",domProps:{textContent:t._s(t.error.batch[0])}}):t._e()]),t._v(" "),r("div",{staticClass:"d-flex justify-content-end"},[r("button",{staticClass:"btn-submit mr-4",attrs:{type:"submit"},on:{click:t.form_sales}},[t._v("\n              Submit\n            ")]),t._v(" "),r("button",{staticClass:" btn-reset mr-3",attrs:{type:"reset"}},[t._v("\n              Reset\n            ")]),t._v(" "),t.receipt_no?r("button",{staticClass:" btn-print",attrs:{type:"button"},on:{click:function(e){return t.print_recieve()}}},[t._v("Print Recieve\n            ")]):t._e()])]):t._e()])])]),t._v(" "),t.form_info?r("div",{staticClass:"form_info container pt-5"},[r("table",{staticClass:"table table-striped text-center"},[t._m(0),t._v(" "),r("tbody",[r("tr",[r("td",{domProps:{textContent:t._s(t.form_info.form_number)}}),t._v(" "),r("td",{domProps:{textContent:t._s(t.form_info.name_of_student)}}),t._v(" "),r("td",{domProps:{textContent:t._s(t.form_info.department.department_name)}}),t._v(" "),r("td",{domProps:{textContent:t._s(t.form_info.batch.batch_name)}}),t._v(" "),r("td",{domProps:{textContent:t._s(t.form_info.sale_date)}})])])])]):t._e()])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("Form Number")]),t._v(" "),r("th",[t._v("Student Name")]),t._v(" "),r("th",[t._v("Department")]),t._v(" "),r("th",[t._v("Batch")]),t._v(" "),r("th",[t._v("Sale Date")])])])}],!1,null,"c9608e92",null);e.default=component.exports}}]);